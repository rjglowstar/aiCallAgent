<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>AI Call Agent Dashboard</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>

  <div id="overlay" style="display:none;"></div>

  <div class="card">
    <div id="controls">
      <div>
        <h2>Customer List <span class="muted">(Total: <span id="totalCount">0</span>)</span></h2>
      </div>

      <div style="display:flex; gap:10px; align-items:center;">
        <input id="search" placeholder="Search name or phone" oninput="filterCustomers(this.value)">
        <button class="primary" onclick="openAddForm()">＋ Add Customer</button>
        <button class="primary" onclick="toggleSchedulePanel()">
          ⏱ Schedule
        </button>
      </div>
    </div>

    <!-- Scheduler info -->
    <div id="schedulerInfo">
      <div id="schedulePanel" class="controls-row" style="display:none;">
        <!-- Left: Date & Mode -->
        <div class="left-section">          
          <div class="date-time" id="currentDateTime" style="display:none;"></div>
        </div>
        <div class="mode-selector">
          <label>
            <input type="radio" id="modeDaily" name="scheduleMode" value="daily" checked
              onchange="onScheduleModeChange()">
            Daily
          </label>
          <label>
            <input type="radio" id="modeOnce" name="scheduleMode" value="once" onchange="onScheduleModeChange()">
            Once
          </label>
        </div>

        <!-- Center: Time Input -->
        <div class="input-box">
          <input id="dailyTime" type="time" title="Set daily time" value="01:35" placeholder="HH:MM">
          <input id="onceDatetime" type="datetime-local" title="Set one-time call" style="display:none;"
            placeholder="Date & Time">
        </div>

        <!-- Right: Buttons -->
        <div class="button-group">
          <button id="saveBtnDaily" class="btn-save" onclick="updateDailySchedule()" title="Save schedule">Save</button>
          <button id="saveBtnOnce" class="btn-save" onclick="scheduleOnceCall()" style="display:none;"
            title="Save schedule">Save</button>
          <button id="toggleBtn" class="btn-toggle active" onclick="toggleScheduler()"
            title="Pause scheduler">Pause</button>
        </div>
      </div>
    </div>

    <table id="customerTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Phone</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Form (popup) -->
  <div id="formBox" aria-hidden="true">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
      <h3 id="formTitle" style="margin:0;">Add New</h3>
      <button class="icon-btn" title="Close" onclick="closeForm()" style="background:transparent;color:#374151;">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
    </div>

    <div style="margin-top:10px">
      <input id="name" placeholder="Name">
      <input id="phone" placeholder="Phone">
      <input id="type" placeholder="Type">
      <input id="amount" placeholder="Amount">
    </div>

    <div class="actions">
      <button class="ghost" onclick="closeForm()">Cancel</button>
      <button class="primary" onclick="saveCustomer()">Save</button>
    </div>
  </div>

  <!-- Confirm dialog -->
  <div id="confirmBox" aria-hidden="true">
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <h4 style="margin:0; font-size:15px;">Confirm</h4>
    </div>
    <div class="confirm-message">Are you sure you want to delete this customer?</div>
    <div class="confirm-actions">
      <button class="ghost" onclick="closeConfirm()">No</button>
      <button class="primary" onclick="(function(){ /* placeholder replaced in JS */ })()">Yes</button>
    </div>
  </div>

  <!-- Call screen -->
  <div id="callBox" aria-hidden="true">
    <div class="call-title">Calling <span id="callToName" style="font-weight:600;color:#0b5fff;margin-left:6px;"></span>
    </div>
    <div class="call-body">
      <div class="spinner">
        <div class="dot"></div>
      </div>
      <div>
        <div id="callStatus" class="call-status">We are calling the customer. Please wait...</div>
        <div style="margin-top:8px; color:#6b7280; font-size:13px;" id="callPhone"></div>
      </div>
    </div>
    <div class="call-actions">
      <!-- Cancel button removed as requested -->
    </div>
  </div>

  <script src="script.js"></script>
  <!-- Toast notification -->
  <div id="toast" aria-live="polite">
    <div id="toastInner">Saved</div>
  </div>
</body>

</html>